<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>好游快爆强更、激活码、礼包码SDK-接入文档 | 陈宝阳个人主页</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/images/photo.jpg">
    <link rel="manifest" href="/images/photo.jpg">
    <link rel="apple-touch-icon" href="/images/photo.jpg">
    <meta name="description" content="Personal Website">
    <meta http-quiv="pragma" cotent="no-cache">
    <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
    <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/assets/css/0.styles.cd3a2423.css" as="style"><link rel="preload" href="/assets/js/app.382c28ba.js" as="script"><link rel="preload" href="/assets/js/2.5c9681e2.js" as="script"><link rel="preload" href="/assets/js/27.94eacba0.js" as="script"><link rel="prefetch" href="/assets/js/10.acf6ba07.js"><link rel="prefetch" href="/assets/js/11.63661c93.js"><link rel="prefetch" href="/assets/js/12.e21e987b.js"><link rel="prefetch" href="/assets/js/13.e063d24c.js"><link rel="prefetch" href="/assets/js/14.c28c7e45.js"><link rel="prefetch" href="/assets/js/15.1db21efc.js"><link rel="prefetch" href="/assets/js/16.07fb3cf0.js"><link rel="prefetch" href="/assets/js/17.5c6d76b7.js"><link rel="prefetch" href="/assets/js/18.c14d91dc.js"><link rel="prefetch" href="/assets/js/19.359ac023.js"><link rel="prefetch" href="/assets/js/20.8021cb2e.js"><link rel="prefetch" href="/assets/js/21.686671f2.js"><link rel="prefetch" href="/assets/js/22.4354d917.js"><link rel="prefetch" href="/assets/js/23.4188acc7.js"><link rel="prefetch" href="/assets/js/24.9e29e9a7.js"><link rel="prefetch" href="/assets/js/25.8e1a52b8.js"><link rel="prefetch" href="/assets/js/26.3b6d1999.js"><link rel="prefetch" href="/assets/js/28.2a22a3a9.js"><link rel="prefetch" href="/assets/js/3.3c88b1aa.js"><link rel="prefetch" href="/assets/js/4.c1f5af53.js"><link rel="prefetch" href="/assets/js/5.2cc9ec1c.js"><link rel="prefetch" href="/assets/js/6.a733f0d4.js"><link rel="prefetch" href="/assets/js/7.502ba01d.js"><link rel="prefetch" href="/assets/js/8.436cdf0e.js"><link rel="prefetch" href="/assets/js/9.dc98d980.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cd3a2423.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">陈宝阳个人主页</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/archives/" class="nav-link">
  云存档
</a></div><div class="nav-item"><a href="/anti/" class="nav-link">
  防沉迷
</a></div><div class="nav-item"><a href="/update/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  强更
</a></div><div class="nav-item"><a href="/paid/" class="nav-link">
  付费下载
</a></div><div class="nav-item"><a href="/pay/" class="nav-link">
  内购
</a></div><div class="nav-item"><a href="/review/" class="nav-link">
  送审
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/archives/" class="nav-link">
  云存档
</a></div><div class="nav-item"><a href="/anti/" class="nav-link">
  防沉迷
</a></div><div class="nav-item"><a href="/update/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  强更
</a></div><div class="nav-item"><a href="/paid/" class="nav-link">
  付费下载
</a></div><div class="nav-item"><a href="/pay/" class="nav-link">
  内购
</a></div><div class="nav-item"><a href="/review/" class="nav-link">
  送审
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>好游快爆强更、激活码、礼包码SDK-接入文档</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/update/#_1-sdk接入" class="sidebar-link">1.  SDK接入</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/update/#_1-1-android-studio集成方式-推荐" class="sidebar-link">1.1 Android Studio集成方式（推荐）</a></li><li class="sidebar-sub-header"><a href="/update/#_1-2-混淆规则" class="sidebar-link">1.2 混淆规则</a></li></ul></li><li><a href="/update/#_2-接入代码" class="sidebar-link">2.  接入代码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/update/#_2-1-sdk初始化" class="sidebar-link">2.1 SDK初始化</a></li><li class="sidebar-sub-header"><a href="/update/#_2-2-激活码-带ui" class="sidebar-link">2.2 激活码(带UI)</a></li><li class="sidebar-sub-header"><a href="/update/#_2-3-激活码-不带ui" class="sidebar-link">2.3 激活码(不带UI)</a></li><li class="sidebar-sub-header"><a href="/update/#_2-4礼包码-带ui" class="sidebar-link">2.4礼包码(带UI)</a></li><li class="sidebar-sub-header"><a href="/update/#_2-5-礼包码-不带ui" class="sidebar-link">2.5 礼包码(不带UI)</a></li><li class="sidebar-sub-header"><a href="/update/#_2-6-页面跳转" class="sidebar-link">2.6 页面跳转</a></li><li class="sidebar-sub-header"><a href="/update/#_2-7-回调中出现的code" class="sidebar-link">2.7 回调中出现的code</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="好游快爆强更、激活码、礼包码sdk-接入文档"><a href="#好游快爆强更、激活码、礼包码sdk-接入文档" class="header-anchor">#</a> 好游快爆强更、激活码、礼包码SDK-接入文档</h1> <center><table><thead><tr><th style="text-align:center;">版本</th> <th style="text-align:left;">更新说明</th> <th style="text-align:center;">日期</th></tr></thead> <tbody><tr><td style="text-align:center;">v1.0.8.0</td> <td style="text-align:left;">1.增加跳转到快爆app的页面功能<br></td> <td style="text-align:center;">2022-05-19</td></tr> <tr><td style="text-align:center;">v1.0.7.0</td> <td style="text-align:left;">1.sdk内部功能优化<br></td> <td style="text-align:center;">2022-03-10</td></tr> <tr><td style="text-align:center;">v1.0.6.0</td> <td style="text-align:left;">1.sdk内部功能优化<br> 2.增加礼包弹窗关闭API</td> <td style="text-align:center;">2022-02-24</td></tr> <tr><td style="text-align:center;">v1.0.5.0</td> <td style="text-align:left;">1.sdk内部功能优化<br></td> <td style="text-align:center;">2022-02-10</td></tr> <tr><td style="text-align:center;">v1.0.4.0</td> <td style="text-align:left;">1.增加更新弹窗支持富文本<br> 2.增加快爆判断</td> <td style="text-align:center;">2022-01-26</td></tr> <tr><td style="text-align:center;">v1.0.3.0</td> <td style="text-align:left;">1.增加激活码调用API<br> 2.内部功能的优化</td> <td style="text-align:center;">2021-08-30</td></tr> <tr><td style="text-align:center;">V1.0.2.0</td> <td style="text-align:left;">1.实现断网处理</td> <td style="text-align:center;">2021-07-30</td></tr> <tr><td style="text-align:center;">V1.0.1.0</td> <td style="text-align:left;">1.内部功能优化</td> <td style="text-align:center;">2021-06-18</td></tr> <tr><td style="text-align:center;">V1.0.0.0</td> <td style="text-align:left;">1.初始化强更、激活码、礼包码功能</td> <td style="text-align:center;">2021-06-03</td></tr></tbody></table></center> <p><a href="/update/update_en.html">English documents</a></p> <h2 id="_1-sdk接入"><a href="#_1-sdk接入" class="header-anchor">#</a> 1.  SDK接入</h2> <h3 id="_1-1-android-studio集成方式-推荐"><a href="#_1-1-android-studio集成方式-推荐" class="header-anchor">#</a> 1.1 Android Studio集成方式（推荐）</h3> <ol><li><code>SDK</code>下载完，<code>common_1.0.1.6_0519.aar</code>、<code>check_1.0.0.0_0519.aar</code>、<code>auxs_1.0.8.0_0519.aar</code>三个依赖包文件导入项目的libs目录下</li> <li>在主工程的<code>build.gradle</code>文件下添加以下代码即可完成依赖，</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>repositories {
   flatDir {
      dirs 'libs'
   }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>然后引用aar文件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>implementation(name: 'common_1.0.1.6_0519', ext: 'aar') //基础依赖包-1.0.1.6版本
implementation(name: 'check_1.0.0.0_0519', ext: 'aar')  //快爆判断-1.0.0.0版本
implementation(name: 'auxs_1.0.8.0_0519', ext: 'aar')   //强更、激活码、礼包码-1.0.8.0版本
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>同步gradle。</p> <h3 id="_1-2-混淆规则"><a href="#_1-2-混淆规则" class="header-anchor">#</a> 1.2 混淆规则</h3> <p>如果您需要使用proguard混淆代码，需确保不要混淆SDK的代码。
请在proguard.cfg文件(或其它混淆文件)尾部添加如下配置:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># 保留我们使用的组件，自定义的BroadcastReceiver等等这些类不被混淆
-keep public class * extends android.app.Activity
-keep public class * extends android.app.Fragment
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.preference.Preference
-keep public class * extends android.view.View

# 不能混淆监听
-keep class com.m3839.sdk.** {*;}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_2-接入代码"><a href="#_2-接入代码" class="header-anchor">#</a> 2.  接入代码</h2> <p><code>注意：</code>当前SDK支持，激活码和礼包码接入分为两种形式，<code>完整的UI功能操作</code>和<code>只有校验接口(无UI),开发者根据需求自己设计UI</code>
主要API
旧版本：<code>com.m3839.auxs.HykbAuxSDK</code> 在1.0.3.0及其之前的版本，旧API会移除掉
新版本：<code>com.m3839.sdk.auxs.HykbAuxSDK</code> 在1.0.4.0版本开始使用当前的API</p> <h3 id="_2-1-sdk初始化"><a href="#_2-1-sdk初始化" class="header-anchor">#</a> 2.1 SDK初始化</h3> <p>描述：
SDK的检测方法(包含更新检测功能)</p> <p>接口方法:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>HykbAuxSDK.init(Activity activity, String gameId, int orientation, HykbAuxInitListener listener)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>参数定义：</p> <table><thead><tr><th style="text-align:center;">参数名称</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">activity</td> <td style="text-align:center;">当前游戏的主Activity</td></tr> <tr><td style="text-align:center;">gameId</td> <td style="text-align:center;">游戏ID</td></tr> <tr><td style="text-align:center;">orientation</td> <td style="text-align:center;">游戏屏幕方向</td></tr> <tr><td style="text-align:center;">listener</td> <td style="text-align:center;">HykbAuxInitListener 检测回调监听</td></tr></tbody></table> <p>示例代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>String gameId = &quot;申请的游戏ID&quot;;
int orientation = ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;

HykbAuxSDK.init(this, gameId, orientation, new HykbAuxInitListener() {
            @Override
            public void onInitFinish(int code, String msg) {
                if(code == 10000) {
                    showToast(msg);
                    setIniTFlag();
                }else if(code == 2001) {
                    //需要退出游戏
                    finish();
                }else if(code == 2002) {
                    //给游戏方提示，弱更弹窗的手动关闭事件
                    showToast(msg);
                }

            }
        });
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>类描述：</p> <p>检测监听类： <code>com.m3839.sdk.auxs.listener.HykbAuxInitListener</code></p> <table><thead><tr><th style="text-align:center;">方法名称</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">onInitFinish(int code, String msg)</td> <td style="text-align:center;">检测回调方法</td></tr></tbody></table> <h3 id="_2-2-激活码-带ui"><a href="#_2-2-激活码-带ui" class="header-anchor">#</a> 2.2 激活码(带UI)</h3> <p>描述：
SDK的激活码功能调用（使用sdk自带UI）
接口方法一:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>//激活码校验接口
HykbAuxSDK.checkActivationCode(String device, HykbAuxActivationListener listener）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>参数定义：</p> <table><thead><tr><th style="text-align:center;">参数名称</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">device</td> <td style="text-align:center;">设备号或者特定的唯一标识符</td></tr> <tr><td style="text-align:center;">listener</td> <td style="text-align:center;">HykbAuxActivationListener 激活码回调接口</td></tr></tbody></table> <p>代码示例：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>String device = &quot;设备号或者特定的唯一标识符&quot;;
HykbAuxSDK.checkActivationCode(device, new HykbAuxActivationListener() {
   @Override
   public void onResult(int code, String msg) {
       if(code == 100) {
           //表示激活成功
       }
       showToast(msg);
   }
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>类描述：
检测监听类： <code>com.m3839.sdk.auxs.listener.HykbAuxActivationListener</code></p> <table><thead><tr><th style="text-align:center;">方法名称</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">onResult(int code, String msg)</td> <td style="text-align:center;">检测回调方法, 当code是100的时候，表示激活成功</td></tr></tbody></table> <h3 id="_2-3-激活码-不带ui"><a href="#_2-3-激活码-不带ui" class="header-anchor">#</a> 2.3 激活码(不带UI)</h3> <p>描述：
SDK的激活码功能调用（不带UI，开发者可以自定义UI）</p> <p>接口方法一:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>//检测接口：检查当前设备码或者唯一标识 是否已经激活
HykbAuxSDK.getActivationStatusByDevice(String device, HykbAuxActivationCheckListener listener)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>参数定义：</p> <table><thead><tr><th style="text-align:center;">参数名称</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">device</td> <td style="text-align:center;">设备号或者特定的唯一标识符</td></tr> <tr><td style="text-align:center;">listener</td> <td style="text-align:center;">HykbAuxActivationCheckListener 检测回调监听</td></tr></tbody></table> <p>接口方法二：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>//获取激活码UI文案
HykbActivationUiInfo activationUiInfo = HykbAuxSDK.getActivationUiInfo()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>接口方法三：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>//激活码
HykbAuxSDK.checkActivationCode(String device, String code, HykbAuxActivationListener listener)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>参数定义：</p> <table><thead><tr><th style="text-align:center;">参数名称</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">device</td> <td style="text-align:center;">设备号或者特定的唯一标识符</td></tr> <tr><td style="text-align:center;">code</td> <td style="text-align:center;">激活码</td></tr> <tr><td style="text-align:center;">listener</td> <td style="text-align:center;">HykbAuxActivationCheckListener 检测回调监听</td></tr></tbody></table> <p>代码示例：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>String device = &quot;设备号或者特定的唯一标识符&quot;;
HykbAuxSDK.getActivationStatusByDevice(device, new HykbAuxActivationCheckListener() {
            @Override
            public void onActivationCheck(boolean hasActivation) {
                if(hasActivation) {
                    //已激活
                    showToast(&quot;已激活&quot;);
                }else{
                    //未激活过，调用自己自定义的UI
                    CustomActivationUI activationUI = new CustomActivationUI();
                    HykbActivationUiInfo activationUiInfo = HykbAuxSDK.getActivationUiInfo()
                    activationUI.init(MainActivity.this, activationUiInfo, device);
                    activationUI.show();
                }
            }
        });
// CustomActivationUI 代码：
public class CustomActivationUI {

    private AlertDialog activationDialog;

    public void init(Context context, HykbActivationUiInfo activationUiInfo, String device) {

        if(activationUiInfo == null) {
            showToast(context, &quot;激活码功能未开启&quot;);
            return;
        }

        //新建一个view
        View customView = View.inflate(context,R.layout.dialog_custom_activation,null);
        //获取view的内容
        final EditText codeEdit = customView.findViewById(R.id.hykb_edit_code);
        final TextView titleTv = customView.findViewById(R.id.hykb_tv_title);
        final TextView linkTv = customView.findViewById(R.id.hykb_tv_link);
        final TextView submitBtn = customView.findViewById(R.id.hykb_btn_submit);

        titleTv.setText(activationUiInfo.getActivationTitle());
        if(activationUiInfo.getActivationLinkStatus() == 1) {
            linkTv.setVisibility(View.VISIBLE);
            linkTv.setText(activationUiInfo.getActivationLinkTitle());
            linkTv.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    if(!TextUtils.isEmpty(activationUiInfo.getActivationKbLink())) {
                        try{
                            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(activationUiInfo.getActivationKbLink()));
                            context.startActivity(intent);
                        } catch (Exception e) {
                            openWeb(context, activationUiInfo);
                        }
                    }else {
                        openWeb(context, activationUiInfo);
                    }
                }
            });
        }else {
            linkTv.setVisibility(View.INVISIBLE);
        }

        submitBtn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                String code = codeEdit.getText().toString();
                if(TextUtils.isEmpty(code)) {
                    showToast(context, &quot;激活码不能为空&quot;);
                    return;
                }
                HykbAuxSDK.checkActivationCode(device, code, new HykbAuxActivationListener() {
                    @Override
                    public void onResult(int code, String msg) {
                        if(code == 100) {
                            //激活成功，关闭弹窗
                            dismiss();
                        }
                        showToast(context, msg);
                    }
                });
            }
        });
        //展示对话框
        activationDialog = new AlertDialog.Builder(context)
                .setView(customView)
                .create();
        //给AlertDialog设置4个圆角
        activationDialog.getWindow().setBackgroundDrawableResource(R.drawable.bg_custom_gift);
    }

    private void openWeb(Context context,HykbActivationUiInfo activationUiInfo) {
        String url = HykbConstant.HYKB_STRING_DEFAULT_LINK;
        boolean condition = !TextUtils.isEmpty(activationUiInfo.getActivationLink())
                &amp;&amp; (activationUiInfo.getActivationLink().startsWith(&quot;http://&quot;)
                || activationUiInfo.getActivationLink().startsWith(&quot;https://&quot;));
        if(condition) {
            url = activationUiInfo.getActivationLink();
        }
        Intent intent = new Intent();
        intent.setAction(&quot;android.intent.action.VIEW&quot;);
        Uri uri = Uri.parse(url);
        intent.setData(uri);
        context.startActivity(intent);
    }

    public void show() {
        if(activationDialog != null) {
            activationDialog.show();
        }
    }

    public void dismiss() {
        if(activationDialog != null) {
            activationDialog.dismiss();
        }
    }

    protected void showToast(Context context, String text) {
        Toast.makeText(context.getApplicationContext(), text, Toast.LENGTH_SHORT).show();
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br></div></div><p>实体类描述：<code>com.m3839.sdk.auxs.data.HykbActivationUiInfo</code></p> <table><thead><tr><th style="text-align:center;">属性名称</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">getActivationTitle()</td> <td style="text-align:center;">获取激活码UI标题</td></tr> <tr><td style="text-align:center;">getActivationLink()</td> <td style="text-align:center;">获取激活码UI跳转链接</td></tr> <tr><td style="text-align:center;">getActivationKbLink()</td> <td style="text-align:center;">获取激活码UI跳转至快爆app链接</td></tr> <tr><td style="text-align:center;">getActivationLinkTitle()</td> <td style="text-align:center;">获取激活码跳转链接的显示文案</td></tr> <tr><td style="text-align:center;">getActivationLinkStatus()</td> <td style="text-align:center;">获取激活码链接开关状态，1:显示，0:隐藏</td></tr></tbody></table> <p>类描述：
检测监听类： <code>com.m3839.sdk.auxs.listener.HykbAuxActivationCheckListener</code></p> <table><thead><tr><th style="text-align:center;">方法名称</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">onResult(int code, String msg)</td> <td style="text-align:center;">检测回调方法, 当code是100的时候，表示激活成功</td></tr></tbody></table> <p>类描述：
检测监听类： <code>com.m3839.sdk.auxs.listener.HykbAuxActivationListener</code></p> <table><thead><tr><th style="text-align:center;">方法名称</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">onActivationCheck(boolean hasActivation)</td> <td style="text-align:center;">检测回调方法, hasActivation为true的时候，表示已激活，hasActivation为false，反之</td></tr></tbody></table> <h3 id="_2-4礼包码-带ui"><a href="#_2-4礼包码-带ui" class="header-anchor">#</a> 2.4礼包码(带UI)</h3> <p>描述：
SDK的礼包码功能调用（使用sdk自带UI）</p> <p>接口方法:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>HykbAuxSDK.checkGiftCode(String device, HykbAuxGiftListener listener)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>参数定义：</p> <table><thead><tr><th style="text-align:center;">参数名称</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">device</td> <td style="text-align:center;">设备号或者特定的唯一标识符</td></tr> <tr><td style="text-align:center;">listener</td> <td style="text-align:center;">HykbAuxGiftListener 礼包码回调接口</td></tr></tbody></table> <p>代码示例：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>String device = &quot;设备号或者特定的唯一标识符&quot;
HykbAuxSDK.checkGiftCode(device, new HykbAuxGiftListener() {
    @Override
    public void onResult(int code, String msg, String codeName) {
        if(code == 100) {
            //礼包码兑换成功，游戏可进行商品发放
        }
        showToast(msg);
    }
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>类描述：</p> <p>检测监听类： <code>com.m3839.sdk.auxs.listener.HykbAuxGiftListener</code></p> <table><thead><tr><th style="text-align:center;">方法名称</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">onResult(int code, String msg, String codeName)</td> <td style="text-align:center;">code为100表示兑换成功,codeName 会返回礼包名称</td></tr></tbody></table> <ul><li>关闭礼包码UI的接口</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>HykbAuxSDK.closeGiftUI();
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意：<code>可以在礼包兑换成功之后进行调用，即onResult方法回调code=100时，进行处理。</code></p> <h3 id="_2-5-礼包码-不带ui"><a href="#_2-5-礼包码-不带ui" class="header-anchor">#</a> 2.5 礼包码(不带UI)</h3> <p>描述：
SDK的礼包码功能调用（不带UI）</p> <p>接口方法一:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>//礼包码校验接口
HykbAuxSDK.checkGiftCode(String device, String code, HykbAuxGiftListener listener)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>参数定义：</p> <table><thead><tr><th style="text-align:center;">参数名称</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">code</td> <td style="text-align:center;">设备号或者特定的唯一标识符</td></tr> <tr><td style="text-align:center;">code</td> <td style="text-align:center;">礼包码</td></tr> <tr><td style="text-align:center;">listener</td> <td style="text-align:center;">HykbAuxCodeListener 检测回调监听</td></tr></tbody></table> <p>接口方法二：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>//获取礼包码UI文案
HykbGiftUiInfo giftUiInfo = HykbAuxSDK.getGiftUiInfo()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>代码示例：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>String device = deviceEdit.getText().toString();
CustomGiftUI giftUI = new CustomGiftUI();
giftUI.init(device,MainActivity.this, HykbAuxSDK.getGiftUiInfo());
giftUI.show();
 
//CustomGiftUI 代码
public class CustomGiftUI {

    private AlertDialog giftDialog;

    public void init(String device, Context context, HykbGiftUiInfo giftUiInfo) {

        if(giftUiInfo == null) {
            showToast(context, &quot;礼包码功能未开启&quot;);
            return;
        }

        //新建一个view
        View customView = View.inflate(context,R.layout.dialog_custom_gift,null);
        //获取view的内容
        final EditText codeEdit = customView.findViewById(R.id.hykb_edit_code);
        final TextView titleTv = customView.findViewById(R.id.hykb_tv_title);
        final TextView linkTv = customView.findViewById(R.id.hykb_tv_link);
        final TextView submitBtn = customView.findViewById(R.id.hykb_btn_submit);

        titleTv.setText(giftUiInfo.getGiftTitle());
        if(giftUiInfo.getGiftLinkStatus() == 1) {
            linkTv.setVisibility(View.VISIBLE);
            linkTv.setText(giftUiInfo.getGiftLinkTitle());
            linkTv.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    if(!TextUtils.isEmpty(giftUiInfo.getGiftKbLink())) {
                        try{
                            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(giftUiInfo.getGiftKbLink()));
                            context.startActivity(intent);
                        } catch (Exception e) {
                            openWeb(context, giftUiInfo);
                        }
                    }else {
                        openWeb(context, giftUiInfo);
                    }
                }
            });
        }else {
            linkTv.setVisibility(View.INVISIBLE);
        }

        submitBtn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                String code = codeEdit.getText().toString();
                if(TextUtils.isEmpty(code)) {
                    showToast(context, &quot;礼包码不能为空&quot;);
                    return;
                }
                HykbAuxSDK.checkGiftCode(device, code, new HykbAuxGiftListener() {
                    @Override
                    public void onResult(int code, String msg, String codeName) {
                        if(code == 100) {
                            //兑换成功
                            showToast(context, &quot;礼包名：&quot;+codeName);
                            dismiss();
                        }else {
                            showToast(context, msg);
                        }

                    }
                });
            }
        });
        //展示对话框
        giftDialog = new AlertDialog.Builder(context)
                .setView(customView)
                .create();
        //给AlertDialog设置4个圆角
        giftDialog.getWindow().setBackgroundDrawableResource(R.drawable.bg_custom_gift);
    }

    private void openWeb(Context context,HykbGiftUiInfo giftUiInfo) {
        String url = HykbConstant.HYKB_STRING_DEFAULT_LINK;
        boolean condition = !TextUtils.isEmpty(giftUiInfo.getGiftLink())
                &amp;&amp; (giftUiInfo.getGiftLink().startsWith(&quot;http://&quot;)
                || giftUiInfo.getGiftLink().startsWith(&quot;https://&quot;));
        if(condition) {
            url = giftUiInfo.getGiftLink();
        }
        Intent intent = new Intent();
        intent.setAction(&quot;android.intent.action.VIEW&quot;);
        Uri uri = Uri.parse(url);
        intent.setData(uri);
        context.startActivity(intent);
    }

    public void show() {
        if(giftDialog != null) {
            giftDialog.show();
        }
    }

    public void dismiss() {
        if(giftDialog != null) {
            giftDialog.dismiss();
        }
    }

    protected void showToast(Context context, String text) {
        Toast.makeText(context.getApplicationContext(), text, Toast.LENGTH_SHORT).show();
    }
}       
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br></div></div><p>监听类描述同上
实体类描述：<code>com.m3839.sdk.auxs.data.HykbGiftUiInfo</code></p> <table><thead><tr><th style="text-align:center;">属性名称</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">getGiftTitle()</td> <td style="text-align:center;">获取礼包码UI标题</td></tr> <tr><td style="text-align:center;">getGiftLink()</td> <td style="text-align:center;">获取礼包码UI跳转链接</td></tr> <tr><td style="text-align:center;">getGiftKbLink()</td> <td style="text-align:center;">获取礼包码UI跳转快爆app链接</td></tr> <tr><td style="text-align:center;">getGiftLinkTitle()</td> <td style="text-align:center;">获取礼包码UI跳转链接的显示文案</td></tr> <tr><td style="text-align:center;">getGiftLinkStatus()</td> <td style="text-align:center;">获取礼包码链接开关状态，1:显示，0:隐藏</td></tr></tbody></table> <h3 id="_2-6-页面跳转"><a href="#_2-6-页面跳转" class="header-anchor">#</a> 2.6 页面跳转</h3> <p>描述：
SDK提供跳转到快爆app内的某个页面</p> <p>接口方法:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>HykbAuxSDK.openPageDetail(int biz);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>参数定义：</p> <table><thead><tr><th style="text-align:center;">参数名称</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">biz</td> <td style="text-align:center;">业务编码：1-5，可根据运营人员的配置传值</td></tr></tbody></table> <h3 id="_2-7-回调中出现的code"><a href="#_2-7-回调中出现的code" class="header-anchor">#</a> 2.7 回调中出现的code</h3> <table><thead><tr><th style="text-align:center;">code</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">2</td> <td style="text-align:center;">表示还未初始化，就进行其他接口的调用</td></tr> <tr><td style="text-align:center;">100</td> <td style="text-align:center;">表示激活码校验成功，或者是礼包码兑换成功，codeName，就是礼包名称</td></tr> <tr><td style="text-align:center;">101</td> <td style="text-align:center;">请求过期，请尝试校准你的手机时间</td></tr> <tr><td style="text-align:center;">102</td> <td style="text-align:center;">token错误，请重试</td></tr> <tr><td style="text-align:center;">103</td> <td style="text-align:center;">礼包码(激活码)格式错误</td></tr> <tr><td style="text-align:center;">104</td> <td style="text-align:center;">礼包码(激活码)不存在或类型错误</td></tr> <tr><td style="text-align:center;">105</td> <td style="text-align:center;">礼包码(激活码)维护中</td></tr> <tr><td style="text-align:center;">106</td> <td style="text-align:center;">礼包码(激活码)尚未开启</td></tr> <tr><td style="text-align:center;">107</td> <td style="text-align:center;">礼包码(激活码)已过期</td></tr> <tr><td style="text-align:center;">108</td> <td style="text-align:center;">礼包码(激活码)已被使用</td></tr> <tr><td style="text-align:center;">109</td> <td style="text-align:center;">服务器开小差了，请重试！</td></tr> <tr><td style="text-align:center;">110</td> <td style="text-align:center;">请求非法</td></tr> <tr><td style="text-align:center;">111</td> <td style="text-align:center;">礼包码(激活码)不能为空</td></tr> <tr><td style="text-align:center;">112</td> <td style="text-align:center;">礼包码(激活码)错误</td></tr> <tr><td style="text-align:center;">114</td> <td style="text-align:center;">礼包码(激活码)验证中，请稍后</td></tr> <tr><td style="text-align:center;">115</td> <td style="text-align:center;">礼包码(激活码)不存在</td></tr> <tr><td style="text-align:center;">116</td> <td style="text-align:center;">设备号为空或格式错误</td></tr> <tr><td style="text-align:center;">1001</td> <td style="text-align:center;">激活码功能关闭</td></tr> <tr><td style="text-align:center;">1002</td> <td style="text-align:center;">礼包码功能关闭</td></tr> <tr><td style="text-align:center;">2002</td> <td style="text-align:center;">更新弹窗关闭</td></tr> <tr><td style="text-align:center;">3002</td> <td style="text-align:center;">快爆判断检测弹窗弹出</td></tr> <tr><td style="text-align:center;">10000</td> <td style="text-align:center;">初始化流程结束</td></tr></tbody></table> <p><code>注</code>：code中101至116 的编码回调是适用于用户自定义激活码或者礼包码UI的场景。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.382c28ba.js" defer></script><script src="/assets/js/2.5c9681e2.js" defer></script><script src="/assets/js/27.94eacba0.js" defer></script>
  </body>
</html>
